{% extends "base.html" %}

{% block content %}
<div class="container mt-5 ">
    <h2 class="mb-4 title-blue-dark">Consulta de Produtos</h2>

    <form method="get" class="row g-3 mb-4">
        <div class="col-md-8">
            <input
                type="text"
                name="name"
                class="form-control"
                placeholder="Buscar por nome do produto"
                value="{{ request.GET.name }}"
            >
        </div>
        <div class="col-md-4">
            <button type="submit" class="btn btn-primary w-100">
                Consultar
            </button>
        </div>
    </form>

    <table class="table table-striped table-hover">
        <thead class="table-blue-dark">
            <tr>
                <th>Nome</th>
                <th>Pre√ßo</th>
                <th>Fornecedor(es)</th>
            </tr>
        </thead>
        <tbody>
            {% for product in products %}
                <tr>
                    <td>{{ product.name }}</td>
                    <td>R$ {{ product.price }}</td>
                    <td>
                        {% for supplier in product.suppliers.all %}
                            {{ supplier.name }}{% if not forloop.last %}, {% endif %}
                        {% endfor %}
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="3" class="text-center">
                        Nenhum produto encontrado
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
